<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<body>

    <figure class="highcharts-figure">
        <div id="container"></div>
    </figure>

</body>
<script>
    const season = []
    const count =[]
    $(document).ready(function () {
        $.ajax({
            url: "/ipl/route1/",
            type: "GET",
            dataType: "json",
            success: function (jsonResponse) {
                // Load all the options
                console.log(jsonResponse.datasets)
                jsonResponse.datasets.forEach(element => {
                    season.push(element.season)
                    count.push(element.count)
                });
                Highcharts.chart('container', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'Matches played each season',
            align: 'left'
        },
        xAxis: {
            categories: season,
            // categories: ['2008', '2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017'],

            crosshair: true,
            accessibility: {
                description: 'Countries'
            },
            title: {
                text: 'Season'
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Matches played'
            }
        },
        tooltip: {
            valueSuffix: ' (Matches)'
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [
            {
                // data: [58, 57, 60, 73, 74, 76, 60, 59, 60, 59]
                data: count,
                name: 'year',
                showInLegend: false

            }
        ]
    });
            },
            error: function (xhr, status, error) {
                console.error("Error fetching options:", error);
            }
        });
    });

  

</script>

</html>